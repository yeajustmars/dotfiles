
alias b="git branch"
alias cda="cd ~/dev/aurum"
alias cdc="cd ~/.config"
{{- if eq .chezmoi.os "linux" }}
alias cdh="cd ~/.config/hydenix"
{{- end }}
alias com="git checkout main"
alias coma="git commit -a"
alias dev="cd $HOME/dev"
alias ea="nvim ~/.config/alacritty/alacritty.toml"
{{- if eq .chezmoi.os "darwin" }}
alias ep="nvim /etc/nix-darwin/modules/packages.nix"
{{- end }}
alias h="history"
alias hg="history | grep "
alias j="jobs"
alias k='kubecolor'
alias kubectl='kubecolor'
alias l="ls -lhG"
alias la='ls -A'
alias ll='ls -l'
{{- if eq .chezmoi.os "darwin" }}
alias nr="sudo darwin-rebuild switch"
{{- end }}
alias py="python3"
alias python="python3"
alias rustrepl="evcxr"
alias t="cd $HOME/dev/tectonic"
alias vi="nvim"
alias vim="nvim"
alias z="chezmoi $@"

gpush() {
  git push origin "$(git branch --show-current)"
}

gpull() {
  git pull origin "$(git branch --show-current)"
}

alias cdb="cd ~/dev/boilermaker/"
bm() {
  if [ -n "$1" ]; then
    local pkg=$( [[ "$1" =~ ^boilermaker_ ]] && echo "$1" || echo "boilermaker_$1" )
    local dir="$HOME/dev/boilermaker/packages/$pkg"
    if [ -d "$dir" ]; then
      cd "$dir"
    else
      echo -e "$ERROR Directory '$dir' does not exist."
      return 1
    fi
  else
    cd ~/dev/boilermaker/
  fi
  return 0
}

{{ if eq .chezmoi.os "linux" }}
# enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    alias dir='dir --color=auto'
    alias vdir='vdir --color=auto'

    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi
{{ end }}

{{ if eq .chezmoi.os "linux" }}
r() { source ~/.bashrc; }
{{ else if eq .chezmoi.os "darwin" }}
alias r="source ~/.zshrc"
{{ end }}

st() {
    cur_dir="$PWD"
    cd $ST_ROOT_DIR
    source ./st-cli/${ST_CLI_VERSION}/cli.sh "$cur_dir" "$@"
}

ST_AUTOCOMPLETE="$ST_ROOT_DIR/st-cli/v2/autocomplete.bash"
{{- if eq .chezmoi.os "linux" }}
if [ -f "$ST_AUTOCOMPLETE" ]; then
  source $ST_AUTOCOMPLETE
fi
{{- end }}

lightrepl() {
  echo '{:color-theme :light-screen-theme}' > ~/.clojure/rebel_readline.edn
}

darkrepl() {
  echo '{:color-theme :dark-screen-theme}' > ~/.clojure/rebel_readline.edn
}

up() {
    local count=$1
    local dir=""

    if [ -z "$count" ]; then
        count=1
    fi

    for i in $(seq 1 $count); do
        dir+="../"
    done

    cd "$dir" || { echo "Error: Cannot go up $count directories."; return 1; }
}

env-save() {
  chezmoi cd && git commit -a && git push origin main
}

env-sync() {
  cd
  chezmoi apply -v
}

{{- if eq .chezmoi.os "darwin" }}

borders_config_light=$(cat <<EOF
#!/bin/bash

## See ~/.config/yabai/yabairc for bootstrapped command

options=(
  style=square # | round
  order=above
  width=3.0
  hidpi=off
  # Light colors
  active_color=0xfff5f5f5
  inactive_color=0xffebebeb
  # Dark colors
  #active_color=0xff373737
  #inactive_color=0xff282828
)

borders "${options[@]}"
EOF
)

borders_config_dark=$(cat <<EOF
#!/bin/bash

## See ~/.config/yabai/yabairc for bootstrapped command

options=(
  style=square # | round
  order=above
  width=3.0
  hidpi=off
  # Light colors
  #active_color=0xfff5f5f5
  #inactive_color=0xffebebeb
  # Dark colors
  active_color=0xff373737
  inactive_color=0xff282828
)

borders "${options[@]}"
EOF
)

set-borders() {
  local borders_config_file="$HOME/.config/borders/bordersrc"
  if [[ "$(defaults read -g AppleInterfaceStyle 2>/dev/null)" == "Dark" ]]; then
    echo "$borders_config_dark" > $borders_config_file
  else
    echo "$borders_config_light" > $borders_config_file
  fi
}

yr() {
  set-borders
  yabai --restart-service
}

{{- end }}
